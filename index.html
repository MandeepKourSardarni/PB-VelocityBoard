<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PB VelocityBoard</title>
    <link rel="stylesheet" href="styles.css">
    <script src="utils.js" defer></script>
    <script src="app.js" defer></script>
    <script src="theme.js" defer></script>

    <!-- NEW Analytics Engine -->
    <script src="analytics.js" defer></script>

    <!-- Export logic -->
    <script src="export.js" defer></script>
</head>

<body>

    <!-- Main Container -->
    <div id="appContainer">

        <!-- ================= FIRST PAGE: SELECT ATHLETE ================= -->
        <div id="athleteSelectScreen" class="screen activeScreen">

            <h1 class="mainTitle">PB VelocityBoard</h1>
            <p class="mainSubtitle">Track ‚Ä¢ Improve ‚Ä¢ Celebrate</p>

            <div id="athleteList"></div>

            <button class="primaryBtn addAthleteBtn" onclick="openAddAthleteModal()">
                ‚ûï Add Athlete
            </button>
        </div>

        <!-- ================= HOME TAB ================= -->
        <div id="homeTab" class="screen hiddenScreen">
            <h2 class="screenTitle">Home</h2>
            <div id="pbTilesContainer"></div>

            <button class="primaryBtn" onclick="openAddEntryModal()">
                ‚ûï Add Race Entry
            </button>

            <div id="entriesContainer"></div>
        </div>

        <!-- ================= SETTINGS TAB ================= -->
        <div id="settingsTab" class="screen hiddenScreen">
            <h2 class="screenTitle">Settings</h2>

            <div id="athleteSettingsSection"></div>

            <button class="dangerBtn" onclick="resetAllData()">
                Reset Everything
            </button>
        </div>

        <!-- ================= ANALYTICS TAB (NEW) ================= -->
        <div id="analyticsTab" class="screen hiddenScreen">
            <h2 class="screenTitle">Analytics</h2>
            <div id="analyticsCardsContainer"></div>
        </div>

        <!-- ================= EXPORT TAB ================= -->
        <div id="exportTab" class="screen hiddenScreen">
            <h2 class="screenTitle">Export</h2>
        </div>

        <!-- ================= BOTTOM NAVIGATION ================= -->
        <div id="bottomNav">
            <button onclick="switchTab('homeTab')" class="navBtn">üè†<br>Home</button>
            <button onclick="switchTab('settingsTab')" class="navBtn">‚öôÔ∏è<br>Settings</button>
            <button onclick="switchTab('analyticsTab')" class="navBtn">üìä<br>Analytics</button>
            <button onclick="switchTab('exportTab')" class="navBtn">üì§<br>Export</button>
        </div>
    </div>

    <!-- ================= ADD ATHLETE MODAL ================= -->
    <div id="addAthleteModal" class="modal hiddenModal">
        <div class="modalContent">
            <h2>Add Athlete</h2>

            <label class="modalLabel">Athlete Name</label>
            <input id="athleteNameInput" class="textInput" placeholder="Enter athlete name">

            <label class="modalLabel">Age</label>
            <input id="athleteAgeInput" type="number" class="textInput" placeholder="Age">

            <label class="modalLabel">Profile Emoji (optional)</label>
            <input id="athleteEmojiInput" class="textInput" placeholder="Choose a fun emoji! ‚≠ê (optional)">

            <div class="modalBtns">
                <button class="primaryBtn" onclick="saveNewAthlete()">Save</button>
                <button class="secondaryBtn" onclick="closeAddAthleteModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- ================= ADD ENTRY MODAL ================= -->
    <div id="addEntryModal" class="modal hiddenModal">
        <div class="modalContent">
            <h2>Add Race Entry</h2>

            <label>Location</label>
            <input id="entryLocationInput" class="textInput" placeholder="Enter location">

            <label>Date</label>
            <input id="entryDateInput" type="date" class="textInput">

            <label>Distance (e.g., 400, 500, 777)</label>
            <input id="entryDistanceInput" class="textInput" placeholder="Distance in meters">

            <label>Time (seconds)</label>
            <input id="entryTimeInput" class="textInput" placeholder="Time in seconds">

            <div class="modalBtns">
                <button class="primaryBtn" onclick="saveNewEntry()">Save</button>
                <button class="secondaryBtn" onclick="closeAddEntryModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"></div>

</body>
</html>
